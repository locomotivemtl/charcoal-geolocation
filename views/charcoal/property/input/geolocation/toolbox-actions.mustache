{{# addCss }}
    <style type="text/css">
        .o-toolbox_actions {
            pointer-events: none;
        }
        .o-toolbox_actions.-round {
            position: absolute;
            z-index: 1;
        }
        .o-toolbox_actions_group {
            display: flex;
            flex-direction: column-reverse;
            justify-content: center;
            pointer-events: none;
        }
        .o-toolbox_edit_actions {
            display: flex;
            flex-direction: column-reverse;
            justify-content: center;
            position: absolute;
            top: 0;
            pointer-events: none;
            /*position: absolute;*/
            /*left: -1px;*/
            /*top: -1px;*/
            /*display: -webkit-inline-box;*/
            /*display: -ms-inline-flexbox;*/
            /*display: inline-flex;*/
            /*vertical-align: middle;*/
        }

        .o-geotoolbox_edit_actions_button {
            margin: 10px;
            position: relative;
            height: 50px;
            width: 50px;
            border-radius: 50% 50%;

            opacity: 0;
            pointer-events: none;
            transition: margin .2s cubic-bezier(.7,.1,.83,.67), opacity 0.2s cubic-bezier(.7,.1,.83,.67);
        }
        .o-geotoolbox_edit_actions_button:not(:last-child) {
            margin-top: -50px;
            /*transform: translateY(60px);*/
        }

        .edit_actions_active .o-geotoolbox_edit_actions_button:not(.is-disabled) {
            margin-top: 10px;
            opacity: 1;
            pointer-events: all;
            transition: margin .2s cubic-bezier(.67,.83,.1,.7) 0.2s, opacity 0.2s cubic-bezier(.67,.83,.1,.7) 0.2s;
        }

        .o-toolbox_edit_actions button {
            /*margin: 0;*/
        }

        .o-geotoolbox_button {
            margin: 10px;
            display: block;
            position: relative;
            height: 50px;
            width: 50px;
            border-radius: 50% 50%;

            opacity: 1;
            pointer-events: all;
            transition: margin 0.2s cubic-bezier(.67,.83,.1,.7) 0.2s, opacity 0.2s cubic-bezier(.67,.83,.1,.7) 0.2s;
        }

        .edit_actions_active .o-geotoolbox_button:not(:last-child) {
            margin-top: -50px;
        }

        .edit_actions_active .o-geotoolbox_button {
            opacity: 0;
            pointer-events: none;
            transition: margin 0.2s cubic-bezier(.7,.1,.83,.67), opacity 0.2s cubic-bezier(.7,.1,.83,.67);
        }

        .o-toolbox_content.-round {
            width: 100%;
            border: 1px solid #ccc;
            border-radius: 0.25rem;
        }
        .c-map-maker_header {
         }
        .c-map-maker_header {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1;
            border-top: 1px solid #ccc;
            border-bottom: none;
            transform: translateY(+100%);

        }
        .c-map-maker_edit {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1;
            border-top: 1px solid #ccc;
            border-bottom: none;
            background-color: #fbfbfb;
            transform: translateY(+100%);
            transition: transform .2s linear,-webkit-transform .2s linear;
        }
        .c-map-maker_edit .btn {
            width: 80px;
        }
        .c-map-maker.is-header-open .c-map-maker_header {
            transform: translateY(0%);
        }
        .c-map-maker.is-item-tool-open .c-map-maker_edit{
            transform: translateY(0%);
        }
        .c-map-maker.is-item-creation-ready .gm-style:first-of-type > div:nth-child(1) {
            cursor: copy!important;
        }


        /* The popup bubble styling. */
        .popup-bubble {
            /* Position the bubble centred-above its parent. */
            position: absolute;
            top: 0;
            left: 0;
            transform: translate(-50%, -100%);
            /* Style the bubble. */
            background-color: #c34747;
            color: white;
            padding: 5px;
            border-radius: 5px;
            font-family: sans-serif;
            overflow-y: auto;
            max-height: 60px;
            box-shadow: 0px 2px 10px 1px rgba(0, 0, 0, 0.5);
        }

        /* The parent of the bubble. A zero-height div at the top of the tip. */
        .popup-bubble-anchor {
            /* Position the div a fixed distance above the tip. */
            position: absolute;
            width: 100%;
            bottom: 8px;
            left: 0;
        }

        /* This element draws the tip. */
        .popup-bubble-anchor::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            /* Center the tip horizontally. */
            transform: translate(-50%, 0);
            /* The tip is a https://css-tricks.com/snippets/css/css-triangle/ */
            width: 0;
            height: 0;
            /* The tip is 8px high, and 12px wide. */
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 8px solid #c34747;
        }

        /* JavaScript will position this div at the bottom of the popup tip. */
        .popup-container {
            cursor: auto;
            height: 0;
            position: absolute;
            /* The max width of the info window. */
            width: 200px;
        }

    </style>
{{/ addCss }}

<div class="o-toolbox_actions -round js-geotoolbox">
    <div class="btn-group-toggle h-100 o-toolbox_actions_group" role="group"
         aria-label="{{# _t }}Map Actions{{/ _t }}">

        <button type="button" class="o-geotoolbox_button btn btn-danger js-reset">
            <span class="fa fa-lg fa-refresh" aria-hidden="true"></span>
            <span class="sr-only">{{# _t }}Reset{{/ _t }}</span>
        </button>

        {{# showMapTools }}
        {{# mapTools }}
            {{# polygon }}
            <button type="button" class="o-geotoolbox_button btn btn-primary btn-lg js-tool-select-button js-add-polygon" data-geometry="Polygon">
                <svg class="o-toolbox_icon" role="img">
                    <use xlink:href="{{ baseUrl }}assets/admin/images/svgs.svg#icon-map-region"></use>
                </svg>
                <span class="sr-only">{{# _t }}Add Polygon{{/ _t }}</span>
            </button>
            {{/ polygon }}
            {{# lineString }}
            <button type="button" class="o-geotoolbox_button btn btn-primary btn-lg js-tool-select-button js-add-line" data-geometry="LineString">
                <svg class="o-toolbox_icon" role="img">
                    <use xlink:href="{{ baseUrl }}assets/admin/images/svgs.svg#icon-map-path"></use>
                </svg>
                <span class="sr-only">{{# _t }}Add Line{{/ _t }}</span>
            </button>
            {{/ lineString }}
            {{# point }}
            <button type="button" class="o-geotoolbox_button is-first btn btn-primary btn-lg js-tool-select-button js-display-marker-toolbox" data-geometry="Point">
                <svg class="o-toolbox_icon" role="img">
                    <use xlink:href="{{ baseUrl }}assets/admin/images/svgs.svg#icon-map-marker"></use>
                </svg>
                <span class="sr-only">{{# _t }}Add Marker{{/ _t }}</span>
            </button>
            {{/ point }}
        {{/ mapTools }}
        {{/ showMapTools }}

        {{! Added this here to keep this button's integration, but cannot be used yet with the plugin }}
        {{!--
        <button type="button" class="btn btn-secondary">
            <svg class="o-toolbox_icon" role="img"><use xlink:href="[[ baseUrl ]]assets/admin/images/svgs.svg#icon-map-area"></use></svg>
            <span class="sr-only">[[# _t ]]Find My Location[[/ _t ]]</span>
        </button>
        --}}
    </div>
    <div class="btn-group-toggle o-toolbox_edit_actions  h-100 js-toolbox_edit_actions"
         aria-label="{{# _t }}Selection Actions{{/ _t }}"
         type="Point"
         role="group">
        <button type="button" class="o-geotoolbox_edit_actions_button btn btn-danger js-delete">
            <span class="fa fa-lg fa-trash" aria-hidden="true"></span>
            <span class="sr-only">{{# _t }}Delete{{/ _t }}</span>
        </button>
        <button type="button" class="o-geotoolbox_edit_actions_button btn btn-primary js-extrude">
            <span class="fa fa-lg fa-scissors" aria-hidden="true"></span>
            <span class="sr-only">{{# _t }}Extrude{{/ _t }}</span>
        </button>
        <button type="button" class="o-geotoolbox_edit_actions_button btn btn-primary js-add">
            <span class="fa fa-lg fa-plus" aria-hidden="true"></span>
            <span class="sr-only">{{# _t }}Add{{/ _t }}</span>
        </button>
        <button type="button" class="o-geotoolbox_edit_actions_button btn btn-success js-confirm">
            <span class="fa fa-lg fa-check" aria-hidden="true"></span>
            <span class="sr-only">{{# _t }}Confirm{{/ _t }}</span>
        </button>
    </div>
</div>
<div class="o-toolbox_content -round c-map-maker is-header-close js-map-maker">
    <div class="c-map-maker_header input-group p-3">
        <label class="input-group-prepend mb-0" for="map_address_{{ inputId }}">
            <span class="input-group-text">{{# _t }}Address{{/ _t }}</span>
        </label>
        <div class="c-map-maker_input form-control js-address" id="map_address_{{ inputId }}" contenteditable></div>
        <div class="input-group-append">
            <button class="btn btn-outline-secondary js-add_place_by_address" type="button" data-toggle="modal"
                    data-target="#myModal">{{# _t }}Search{{/ _t }}</button>
        </div>
    </div>
    <div class="c-map-maker_map js-map-maker-map"></div>
</div>
{{!
    Input that will contain the actual data
    This input will be posted on save / update
}}